Design and Function

Character Design and Function
=============================

+------+-----------------------------------------------------------------------+
| Stat | Description                                                           |
+======+=======================================================================+
| AG   | Agility. Increases chance to disarm attacks, flee, and dodge. Also    |
|      | increases a character's ability to disarm traps without misfire.      |
+------+-----------------------------------------------------------------------+
| IQ   | Intelligence. Increases the effectiveness and success rate of         |
|      | mage/psionic spells.                                                  |
+------+-----------------------------------------------------------------------+
| LK   | Luck increases your resistance to status effects and chance for rare  |
|      | items to drop from enemies. Also increases ability to disarm traps    |
|      | without misfire.                                                      |
+------+-----------------------------------------------------------------------+
| PI   | Piety increases the effectiveness and success rate for all priest     |
|      | spells                                                                |
+------+-----------------------------------------------------------------------+
| ST   | Strength increases physical damage done and the hit rate for all      |
|      | physical attacks.                                                     |
+------+-----------------------------------------------------------------------+
| VT   | Vitality increases the amount of hit points a character receives when |
|      | they level up.                                                        |
+------+-----------------------------------------------------------------------+
| AC   | Armor Class.  The lower the number (into negative numbers), the       |
|      | harder the target is to hit.                                          |
+------+-----------------------------------------------------------------------+


Maps
====

1. Three arrays of objects - map_initial, and map_save (explored area), and
    map_in_play (current in memory copy). Map_initial and map_save are both 
    reflected in the files mapname.map and mapname.save

2. Map_in_play is generated:
	a. load the user-modified "map_save" array of "room" objects from
    mapname.save
	b. load the non-changing "map_initial" array of "room" objects from
    mapname.map
	c. For each object in "map_save", if "has_been_occupied" value is true
    copy the tuple to the "map_in_play" final array, else read the location
    value and load tuple with identical location value from "map_initial" into
    "map_in_play".

3. Map_in_play is updated:
	a. mark tuple in map_in_play at player location value "is_occupied" value
    true
	b. if event_on_occupy is not 0, play_event(event_on_occupy)
	c. mark tuple in map_in_play at player location value "has_been_occupied"
    to true

Values in each "tile" tuple:
	Location(x,y)
	Can_be_occupied(t/f)
    Is_occupied(t/f)
	Has_been_occupied(t/f)
	Event_on_occupy(event_number)
	What_is_(north/south/east/west)
		exit, wall, door, secret door, grate (triggered), event

Item drops:
    a. Item drops will be level-based, rather than monster-based.  Thus, each
    level of each tower will have a static drop list and all mobs on that
    level have the potential to drop items from that list.
    b. ALL items will be "unidentified" upon pickup. Items can be identified
    either by a character with the Bishop class or by the merchant in town.


Items
=====

Item properties:
    Description - Long description (if you investigate the item)
    Name - Long name (if you investigate the item)
    Short_name - Displayed in the character's inventory listing
Notes:
    Once acquired, items occupy an inventory slot until they are used or
    destroyed.  Items can be deposited in town at the appropriate shop (see
    "bank" below).
    When "dropped", an item is destroyed and gone forever.
    All items can be used at any time, but only have an effect under specific
    conditions.
    Items such as potions and scrolls are single-use "portable spells" that can
    be used by any character class or race. When used, they are marked as 
    "broken" and are unusable. In classic Wizardry, there is no way to repair 
    these items - they just take up space until they are dropped (destroyed).
    Should it be possible to "repair" "broken" items if certain conditions are 
    met?

Equipment
=========
Weapons, Armor, Accessories are all "equipment" but are still instances of the 
"Item" class.  Equipment will have a different initialization method (__init__) 
which requires the appropriate input (listed below).

Equipment properties:
    Is_equippable(t/f)
    Is_equipped(t/f)
    Min_dmg(int)
    Max_dmg(int)
    Hit_multiplier(float)
    Equip_effect([]) - list of index numbers/keys. There will be a dictionary of
    "spell" effects, and this list contains a key for each effect the item needs
    to have when equipped.
    Use_effect(int) - key related to the spell dictionary, for what effect the
    item has when used as an item


General
=======
    Party Conditions:
        In battle
        Engaged with NPC
        In camp
        On event trigger
        Facing direction x
        None of the above (implied)

Saving the game
===============
Saving the game should prevent "save scumming" (the use of frequent saves
to circumvent challenges or cheat random rolls), but should be useful to
the user.
The game should automatically save the progress of the game for the player
at regular intervals:
* After a battle concludes (win, lose or retreat)
* Upon returning to/leaving town
* Game is closed/quit
The player can save the game manually in a SEPARATE slot from the auto-save 
feature. There is only ONE slot for manual saves. When the player saves the
game again, the existing save is overwritten. The player will be allowed to
save at the following times:
* In camp
* In town
* Between battles (not during) so long as an event is not taking place

Monsters
========
Notes:
    * Monsters are encountered randomly at every level of every tower.
    * Monsters are encountered in groups
    * Just like the player party, monster parties have "front" and "back" rows,
      with the same effects.
    * Monsters may "advance" to get to the front of the party.
    * Unlike the player party, multiple monsters of the same type may occupy a
      single party "slot". Thus, 5 "samurai" could be in slot 1 while 3 "mage"
      could be in slot 2.
    * The number of available slots in a monster party is a function of the
      tower level the player party is on. Thus, level 1 would might be
      restricted to 1-2 slots, but level 3 might have monster groups of 3-4
      slots, and some levels might have monster parties with a full 6 slots.
    * Similarly, the number of monsters of the same type which can occupy a
      single slot increases with the tower level being played.
    * Monster types are pre-defined, and groups are semi-randomly built from
      level-appropriate monster types.
    * Encounter rates increase slightly as a function of tower level.
    * The following monsters are always "identified":
        * Fixed/special monsters and their followers
        * Encounters with only one group (slot)
        * Summoned enemies
    * Encounter rates rise with steps forward (no turn-n-grind).
    * "Friendly" monster groups appear in the top/light levels of towers only.

Monster Traits
==============
See "monsters.txt" 

Monster Appearance
==================

How to handle monster locations? I need to determine:
* What towers/dungeons monsters appear on
* What levels of said towers/dungeons monsters appear on
* What is the encounter rate at a given level
* How is the encounter rate affected by movement
* How often are monsters "unknown" (gray figure)
* How easily are monsters identified (color figure) in battle (no spell/item)

Monster Spellcasters
====================
* Some encountered monsters can cast spells
* Monster spells are a subset of the existing character spells
* How does enemy casting logic work?
    * How do they decide between physical attack/cast spell?
        * Percentage chance of casting spells
        * Chance increases when characters reach "critical" health
    * How do they decide which spell to cast?
        * Group-wide spells are preferred over single-target
    * Do they have spell slots, or infinite casts?
        * Spell slots, with MP determined on per-type basis.
    * How is the strength of their spells determined?

Spells/Spellcasting
===================
Spells in Wizardry have classically had a unique "Wizardry" naming scheme.
Instead of "Heal" the spell is named "Dios".  Instead of "Heal more" the
spell is named "Dial".  Intstead of "Great heal" the spell is named "Dialma".
While this does give the spells a consistent naming scheme, selecting spells
is hampered by being reqired to memorize odd names or reference a list. While
this form of play should be an option, the player will also be provided with
the option to play with "Anglicised" names instead to make spell
identification easier and faster.

Slots vs. Magic Points
======================
Wizardry has typically employed a "spell slot" mechanic for casters. For
instance, 5/4/3/2/1/0/0/0/0 would indicate that the character could cast 5
level 1 spells, 4 level 2 spells, 3 level 3 spells, and so on. When a character
casts a spell of a given level, the number in that "slot" is decremented by
one. This is opposed to the "magic point" mechanic, where each spell has a given
cost in magic points, and the character has a "pool" of MP to draw from. It
seems that the "slot" mechanic is employed for at least two reasons: to keep
casters from being too powerful/flexible (can't cast 3 lvl 4 spells instead of
7 lvl 1 spells, etc.), and to force players to carefully manage their spells
(do I cast a damage spell in battle, or save the slot for the auto-map
feature/wall detection?). For now, I plan to keep with the "spell slot"
mechanic.

TODO:
How do event driven encounter work?
